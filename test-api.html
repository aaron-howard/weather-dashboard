<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>API Key Tester - Weather Dashboard</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            margin: 0;
            padding: 20px;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .tester-container {
            background: white;
            border-radius: 20px;
            padding: 40px;
            max-width: 600px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .test-section {
            margin-bottom: 25px;
            padding: 20px;
            background: #f8f9fa;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }
        .test-section h3 {
            color: #2c3e50;
            margin-bottom: 10px;
        }
        .test-button {
            background: linear-gradient(135deg, #667eea, #764ba2);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            margin: 10px 5px;
            transition: transform 0.3s ease;
        }
        .test-button:hover {
            transform: scale(1.05);
        }
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
        }
        .success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }
        .error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }
        .info {
            background: #d1ecf1;
            color: #0c5460;
            border: 1px solid #bee5eb;
        }
        .api-key-input {
            width: 100%;
            padding: 12px;
            border: 2px solid #e9ecef;
            border-radius: 8px;
            font-size: 1rem;
            margin: 10px 0;
        }
        .api-key-input:focus {
            outline: none;
            border-color: #667eea;
        }
    </style>
</head>
<body>
    <div class="tester-container">
        <h1>ðŸ”‘ API Key Tester</h1>
        
        <div class="test-section">
            <h3>Step 1: Enter Your API Key</h3>
            <input type="text" id="apiKeyInput" class="api-key-input" 
                   placeholder="Enter your OpenWeatherMap API key here..." 
                   value="0c7d11b30534545dee1f72d8f0b2d463">
        </div>
        
        <div class="test-section">
            <h3>Step 2: Test Your API Key</h3>
            <button class="test-button" onclick="testCurrentWeather()">Test Current Weather</button>
            <button class="test-button" onclick="testForecast()">Test 5-Day Forecast</button>
            <button class="test-button" onclick="testBoth()">Test Both APIs</button>
            <div id="testResult"></div>
        </div>
        
        <div class="test-section">
            <h3>Step 3: Troubleshooting</h3>
            <p><strong>Common Issues:</strong></p>
            <ul>
                <li><strong>401 Unauthorized:</strong> API key is invalid or not activated</li>
                <li><strong>429 Too Many Requests:</strong> Rate limit exceeded</li>
                <li><strong>Network Error:</strong> Check your internet connection</li>
            </ul>
            <p><strong>Solutions:</strong></p>
            <ul>
                <li>Wait 2 hours after creating a new API key</li>
                <li>Verify the key in your OpenWeatherMap account</li>
                <li>Check your API usage limits</li>
            </ul>
        </div>
    </div>

    <script>
        function getApiKey() {
            return document.getElementById('apiKeyInput').value.trim();
        }

        function showResult(message, type = 'info') {
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = `<div class="result ${type}">${message}</div>`;
        }

        async function testCurrentWeather() {
            const apiKey = getApiKey();
            if (!apiKey) {
                showResult('Please enter your API key first.', 'error');
                return;
            }

            showResult('Testing current weather API...', 'info');

            try {
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/weather?q=London&appid=${apiKey}`
                );

                if (response.ok) {
                    const data = await response.json();
                    showResult(`âœ… Current Weather API Test PASSED!\n\nCity: ${data.name}\nTemperature: ${data.main.temp}Â°C\nWeather: ${data.weather[0].description}`, 'success');
                } else {
                    const errorText = await response.text();
                    showResult(`âŒ Current Weather API Test FAILED!\n\nStatus: ${response.status}\nError: ${errorText}`, 'error');
                }
            } catch (error) {
                showResult(`âŒ Network Error: ${error.message}`, 'error');
            }
        }

        async function testForecast() {
            const apiKey = getApiKey();
            if (!apiKey) {
                showResult('Please enter your API key first.', 'error');
                return;
            }

            showResult('Testing 5-day forecast API...', 'info');

            try {
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/forecast?q=London&appid=${apiKey}`
                );

                if (response.ok) {
                    const data = await response.json();
                    showResult(`âœ… 5-Day Forecast API Test PASSED!\n\nForecast entries: ${data.list.length}\nCity: ${data.city.name}\nFirst forecast: ${new Date(data.list[0].dt * 1000).toLocaleString()}`, 'success');
                } else {
                    const errorText = await response.text();
                    showResult(`âŒ 5-Day Forecast API Test FAILED!\n\nStatus: ${response.status}\nError: ${errorText}`, 'error');
                }
            } catch (error) {
                showResult(`âŒ Network Error: ${error.message}`, 'error');
            }
        }

        async function testBoth() {
            showResult('Testing both APIs...', 'info');
            await testCurrentWeather();
            await new Promise(resolve => setTimeout(resolve, 1000));
            await testForecast();
        }
    </script>
</body>
</html>
